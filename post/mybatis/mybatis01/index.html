<!DOCTYPE html>
<html lang="en"><head>
    <title>首页</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#000084" />
    <link rel="icon" href="https://fyzn12.github.io/favicon.ico">
    <link rel="canonical" href="https://fyzn12.github.io">
    
    
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"></button>
            <a class="brand" href="https://fyzn12.github.io">首页</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    
                    
                        
                            <li>
                                <a href="/about/">
                                    
                                    <span>About</span>
                                </a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/post/">
                                    
                                    <span>All posts</span>
                                </a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </div>
</nav><div id="content" class="container">

<div class="row-fluid navmargin">
    <div class="page-header">
        <h1>Mybatis-的配置文件 - Tue, Sep 24, 2019</h1>
    </div>
    <p class="lead">Mybatis的配置文件以及mapper文件.....</p>
    

<h1 id="mybatis的配置文件以及mapper文件">Mybatis的配置文件以及mapper文件</h1>

<h3 id="在mybatis的配置文件中-所有的配置均是在-configuration-configuration-这对标签里配置-在这里记录一些课堂老师讲解的重要配置-br">在mybatis的配置文件中，所有的配置均是在 <code>&lt;configuration&gt;&lt;/configuration&gt;</code>`这对标签里配置。在这里记录一些课堂老师讲解的重要配置。  <br></h3>

<hr />

<pre><code>&lt;configuration&gt; 

1.配置日志（开启日志）通过```&lt;settings&gt;&lt;/settings&gt;```标签配置，如下所示：  

   &lt;!-- 开启日志 --&gt;  
    &lt;settings&gt;
      &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;
    &lt;/settings&gt;  

2.为了提高效率，在mapper文件不用每个resultType属性里都添加包名，设置别名。设置在typeAliases标签里，如下两种方式配置，优点和缺点  

     &lt;typeAliases&gt;
        &lt;typeAlia type=&quot;com.pojo.Student&quot;alias=&quot;Student&quot;/&gt;--方法一 缺点：有多少个类，就得有多少行这个代码
         &lt;!-- 或者&lt;package name=&quot;com.pojo/&gt;&quot; --方法二 缺点： 在pojo包下如果还有子包，在子包下有与子包同级的类名相同时，会出现歧义，不知指定的是哪个包。
      &lt;/typeAliases&gt;
</code></pre>

<p>3.数据库连接的配置</p>

<pre><code>  &lt;environments default=&quot;default&quot;&gt;
   &lt;!--配置多个数据源,但只能指定一个使用  --&gt;
     &lt;!-- Mysql的数据库链接 --&gt;
    &lt;environment id=&quot;default&quot;&gt;
       &lt;transactionManager type=&quot;JDBC&quot;/&gt;&lt;!-- 指定当前数据库的事务管理方式 --&gt;
       &lt;dataSource type=&quot;POOLED&quot;&gt;&lt;!-- 数据源的管理方式为连接池 --&gt;
       &lt;property name=&quot;driver&quot;   value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
       &lt;property name=&quot;url&quot; value=&quot;dbc:mysql://localhost:3306/ssmLab4046?serverTimezone=GMT%2B8&quot;/&gt;
       &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
       &lt;property name=&quot;password&quot; value=&quot;1234&quot;/&gt;
     &lt;!-- 设定数据库的链接4要素 --&gt;
    &lt;/dataSource&gt;
    &lt;/environment&gt;   
</code></pre>

<p>4.映射文件的扫面通过<mappers>标签配置。</p>

<pre><code> &lt;!-- 一定是文件格式--&gt;
    &lt;mappers&gt;
     &lt;mapper resource=&quot;com/mapper/StudentMapper.xml&quot;/&gt;
    &lt;/mappers&gt;

&lt;/configuration&gt;  
&lt;mapper&gt;&lt;/mapper&gt;  
</code></pre>

<h4 id="mapper文件配置以及对应方法的讲解">mapper文件配置以及对应方法的讲解</h4>

<ol>
<li><p>mapper配置时设置的属性namespace定义一个操作包，是映射文件匹配的重要点；</p>

<pre><code>&lt;mapper namespace=&quot;com.Mapper.Student&quot;&gt;
</code></pre>

<p>&emsp;</p></li>

<li><p>插入时获取插入的主键<br />
 <!-- 插入时,获取插入的主键 -->
 <insert id="insertStudentCatchID" >
    insert  into student(name,age,score) values(#{name},#{age},#{score})
    <selectKey resultType="int" keyProperty="id" order="AFTER">
        select @@identity
    </selectKey>
 </insert><br />
  对应的方法是pojo类，不带主键的构造方法（service层的方法为）：<br />
  public void insertStudentCatchID(Student s) {
     if(session!=null){
        session.insert(&ldquo;com.Mapper.Student.insertStudentCatchID&rdquo;, s);
        session.commit();
      }<br />
  }<br />
&emsp;</p>

<ol>
<li>#和$的区别和使用<br />
<br /></li>
</ol></li>
</ol>

<p>在传参过程中 #{}使用占位符的方式传参。${value}字符条件的拼接；在使用过程中，有一点很小的区别，#{xxx}需要用 <code>'%'#{xxx}'%'</code>包括起来，而${value}用<code>'%${value}%'</code>包起来.另为${vlaue}在万不得已的时候不推荐用，因为会造成SQL注入例如：</p>

<pre><code>selete * from student 
      where id=#{xxx} or 1=1  
    假如这是登录验证就会产生SQL注入  
</code></pre>

    <h4><a href="https://fyzn12.github.io">Back to Home</a></h4>
</div>


        </div><footer class="container">
    <hr class="soften">
    <p>

    <a href="https://fyzn12.github.io">fyzn12</a> | 

&copy; 
<a href="https://fyzn12.github.io" target="_blank">
    fyzn12
</a>
<span id="thisyear">2020</span>

    | @


        | Built on <a href="//gohugo.io" target="_blank">Hugo</a>
</p>
    <p class="text-center">
        <a href="https://facebook.com">Facebook</a> 
        <a href="https://twitter.com">Twitter</a> 
        <a href="https://linkedin.com">Linkedin</a> 
        <a href="https://github.com">GitHub</a> 
        <a href="https://gitlab.com">GitLab</a>
    </p>
</footer>

</body><link rel="stylesheet" href="/css/bootstrap.css">
<link rel="stylesheet" href="/css/bootstrap-responsive.css">
<link rel="stylesheet" href="/css/style.css">

<script src="/js/jquery.js"></script>
<script src="/js/bootstrap-386.js"></script>
<script src="/js/bootstrap-transition.js"></script>
<script src="/js/bootstrap-alert.js"></script>
<script src="/js/bootstrap-modal.js"></script>
<script src="/js/bootstrap-dropdown.js"></script>
<script src="/js/bootstrap-scrollspy.js"></script>
<script src="/js/bootstrap-tab.js"></script>
<script src="/js/bootstrap-tooltip.js"></script>
<script src="/js/bootstrap-popover.js"></script>
<script src="/js/bootstrap-button.js"></script>
<script src="/js/bootstrap-collapse.js"></script>
<script src="/js/bootstrap-carousel.js"></script>
<script src="/js/bootstrap-typeahead.js"></script>
<script src="/js/bootstrap-affix.js"></script>
<script>
    _386 = { 
        fastLoad: false ,
        onePass: false , 
        speedFactor: 1 
    };

    
    function ThisYear() {
        document.getElementById('thisyear').innerHTML = new Date().getFullYear();
    };
</script></html>
