<!DOCTYPE html>
<html lang="en"><head>
    <title>首页</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no" />
    <meta name="theme-color" content="#000084" />
    <link rel="icon" href="https://fyzn12.github.io/favicon.ico">
    <link rel="canonical" href="https://fyzn12.github.io">
    
    
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"></button>
            <a class="brand" href="https://fyzn12.github.io">首页</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    
                    
                        
                            <li>
                                <a href="/about/">
                                    
                                    <span>About</span>
                                </a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/post/">
                                    
                                    <span>All posts</span>
                                </a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </div>
</nav><div id="content" class="container">

<div class="row-fluid navmargin">
    <div class="page-header">
        <h1>SpringBoot提供的五种异常机制 - Tue, May 12, 2020</h1>
    </div>
    <p class="lead">SpringBoot提供的五种异常机制......</p>
    

<h1 id="springboot中的异常处理方式">SpringBoot中的异常处理方式</h1>

<ul>
<li>自定义错误页面<br /></li>
<li>@ExceptionHandle注解处理异常<br /></li>
<li>@ControllerAdvice + @ExceptionHandle注解处理异常<br /></li>
<li>配置SimpleMappingExceptionResolver处理异常<br /></li>
<li>自定义HandleExceptionResolver类处理异常<br />
<br /></li>
</ul>

<hr />

<h1 id="1-自定义错误页面">1 自定义错误页面</h1>

<h2 id="1-1-springboot的默认异常机制详解">1.1 SpringBoot的默认异常机制详解</h2>

<pre><code>    SpringBoot默认的异常机制：SpringBoot默认已经提供了一套处理异常的机制。  
    一旦程序中出现了异常，SpringBoot会向/error的url发送请求。在SpringBoot中提供了一个  
    叫BasicExceptionController来处理/error请求，然后跳转到默认显示的页面来展示异常信息。   
</code></pre>

<div align=center><img src="https://fyzn12.github.io/img/picture/springboot-error.png"/></div>   
  

<h2 id="1-2-自定义错误界面">1.2 自定义错误界面</h2>

<h3 id="如果我们需要将所有的异常统一跳转到自定义错误页面-需要在classpath下创建一个templates目录-即在resources目录下创建templates目录-在该目录下创建一个名为error-html的页面">如果我们需要将所有的异常统一跳转到自定义错误页面，需要在classpath下创建一个templates目录(即在resources目录下创建templates目录)，在该目录下创建一个名为error.html的页面。</h3>

<h1 id="2-基于-exceptionhandler注解处理异常">2 基于@ExceptionHandler注解处理异常</h1>

<h2 id="2-1-创建指定处理的异常">2.1 创建指定处理的异常</h2>

<pre><code>    /**  
     *java.lang.ArithmeticException  
     *该方法需要返回一个ModelAndView：目的是可以让我们封装异常信息以及视图的指定  
     *参数Exceptione:会将产生异常对象注入到方法中  
     */  
    @ExceptionHandler(value={java.lang.ArithmeticException.class})    
    publicModelAndViewarithmeticExceptionHandler(Exceptione){  
        ModelAndViewmv=newModelAndView();  
        mv.addObject(&quot;error&quot;,e.toString());  
        mv.setViewName(&quot;error1&quot;);  
        returnmv;  
    }  

    /**  
      *java.lang.NullPointerException  
      *该方法需要返回一个ModelAndView：目的是可以让我们封装异常信息以及视图的指定  

      *参数Exceptione:会将产生异常对象注入到方法中  
      **/  
    @ExceptionHandler(value={java.lang.NullPointerException.class})    
    publicModelAndViewnullPointerExceptionHandler(Exceptione){  
        ModelAndViewmv=newModelAndView();  
        mv.addObject(&quot;error&quot;,e.toString());  
        mv.setViewName(&quot;error2&quot;);  
        return mv；  
    }  
</code></pre>

<h2 id="2-2-使用该方法的总结">2.2 使用该方法的总结</h2>

<h3 id="使用-exceptionhandler注解处理异常时-首先编写异常页面error-html-其次创建controller类-编写基于注解-exceptionhandle注解的方法-并且在该方法中必须指定想要助理异常的名称如上面的java-lang-nullpointerexception-class-java-lang-arithmeticexception-class">使用@ExceptionHandler注解处理异常时，首先编写异常页面error.html，其次创建Controller类，编写基于注解@ExceptionHandle注解的方法，并且在该方法中必须指定想要助理异常的名称如上面的java.lang.NullPointerException.class、java.lang.ArithmeticException.class。</h3>

<h1 id="3-使用-controlleradvice-exceptionhandler注解处理异常">3 使用@ControllerAdvice + @ExceptionHandler注解处理异常</h1>

<h2 id="3-1-创建一个全局异常类使用controlleradvice注解">3.1 创建一个全局异常类使用ControllerAdvice注解</h2>

<pre><code>        /**
         *全局异常处理类
         **/
        @ControllerAdvice
        public class GlobalException {
            /**
             * java.lang.ArithmeticException
             * 该方法需要返回一个ModelAndView：目的是可以让我们封装异常信息以及视图的指定
             * 参数Exceptione:会将产生异常对象注入到方法中
             **/
            @ExceptionHandler(value = {java.lang.ArithmeticException.class})
            public ModelAndView arithmeticExceptionHandler(Exceptione) {
                ModelAndViewmv = newModelAndView();
                mv.addObject(&quot;error&quot;, e.toString());
                mv.setViewName(&quot;error1&quot;);
                returnmv;
            }

            /**
             * java.lang.NullPointerException
             * 该方法需要返回一个ModelAndView：目的是可以让我们封装异常信息以及视图的指定
             * 参数Exceptione:会将产生异常对象注入到方法中
             **/
            @ExceptionHandler(value = {java.lang.NullPointerException.class})
            public ModelAndView nullPointerExceptionHandler(Exceptione) {
                ModelAndViewmv = newModelAndView();
                mv.addObject(&quot;error&quot;, e.toString());
                mv.setViewName(&quot;error2&quot;);
            }
        }
</code></pre>

<h3 id="3-1-1-创建时首先定义一个使用-controlleradvice注解的类">3.1.1 创建时首先定义一个使用@ControllerAdvice注解的类</h3>

<h3 id="3-1-2-在类中使用-exceptionhandler注解标识需要处理的异常">3.1.2 在类中使用@ExceptionHandler注解标识需要处理的异常</h3>

<h3 id="总结-使用-controlleradvice-exceptionhandler注解可以解决全局问题">总结：使用@ControllerAdvice + @ExceptionHandler注解可以解决全局问题。</h3>

<h1 id="4-配置simplemappingexceptionresolver处理异常">4 配置SimpleMappingExceptionResolver处理异常</h1>

<h2 id="4-1-创建一个使用-configuration注解的全局类globalexception类">4.1 创建一个使用@Configuration注解的全局类GlobalException类</h2>

<h2 id="4-2-在该类中创建一个-ben注解的方法-返回值为simplemappingexceptionresolver的方法-在该方法体中添加需要处理的异常即可">4.2 在该类中创建一个@Ben注解的方法，返回值为SimpleMappingExceptionResolver的方法，在该方法体中添加需要处理的异常即可</h2>

<pre><code>       /**
         *通过SimpleMappingExceptionResolver做全局异常处理
         **/
        @Configuration
        public class GlobalException {
            /**
             * 该方法必须要有返回值。返回值类型必须是：SimpleMappingExceptionResolver
             **/
            @Bean
            public SimpleMappingExceptionResolver getSimpleMappingExceptionResolver() {
                SimpleMappingExceptionResolverresolver = newSimpleMappingExceptionResolver();
                Propertiesmappings = newProperties();
                /**
                 * 参数一：异常的类型，注意必须是异常类型的全名
                 * 参数二：视图名称
                 **/
                mappings.put(&quot;java.lang.ArithmeticException&quot;, &quot;error1&quot;);
                mappings.put(&quot;java.lang.NullPointerException&quot;, &quot;error2&quot;);
                //设置异常与视图映射信息的
                resolver.setExceptionMappings(mappings);
                return resolver;
            }
        }    
</code></pre>

<h1 id="5-自定义handleexceptionresolver类处理异常">5 自定义HandleExceptionResolver类处理异常</h1>

<h2 id="5-1-创建一个使用-configuration标识的类-并实现handleexceptionresolver接口">5.1 创建一个使用@Configuration标识的类，并实现HandleExceptionResolver接口</h2>

<h2 id="5-2-在该接口中重写resolveexception方法-在该方法体中标明异常跳转的error页面即可">5.2 在该接口中重写resolveException方法，在该方法体中标明异常跳转的error页面即可</h2>

<pre><code>        /**
         *通过实现HandlerExceptionResolver接口做全局异常处理
         **/
        @Configuration
        public class GlobalExceptionimplementsHandlerExceptionResolver{
            @Override
            public ModelAndView resolveException(HttpServletRequestrequest,HttpServletResponseresponse,Objecthandler,Exceptionex){
                ModelAndViewmv=newModelAndView();
                //判断不同异常类型，做不同视图跳转
                if(exinstanceofArithmeticException){
                    mv.setViewName(&quot;error1&quot;);
                }
                if(exinstanceofNullPointerException){
                    mv.setViewName(&quot;error2&quot;);
                }
                mv.addObject(&quot;error&quot;,ex.toString());
                return mv;
            }
        }
</code></pre>

    <h4><a href="https://fyzn12.github.io">Back to Home</a></h4>
</div>


        </div><footer class="container">
    <hr class="soften">
    <p>

    <a href="https://fyzn12.github.io">fyzn12</a> | 

&copy; 
<a href="https://fyzn12.github.io" target="_blank">
    fyzn12
</a>
<span id="thisyear">2020</span>

    | @


        | Built on <a href="//gohugo.io" target="_blank">Hugo</a>
</p>
    <p class="text-center">
        <a href="https://facebook.com">Facebook</a> 
        <a href="https://twitter.com">Twitter</a> 
        <a href="https://linkedin.com">Linkedin</a> 
        <a href="https://github.com">GitHub</a> 
        <a href="https://gitlab.com">GitLab</a>
    </p>
</footer>

</body><link rel="stylesheet" href="/css/bootstrap.css">
<link rel="stylesheet" href="/css/bootstrap-responsive.css">
<link rel="stylesheet" href="/css/style.css">

<script src="/js/jquery.js"></script>
<script src="/js/bootstrap-386.js"></script>
<script src="/js/bootstrap-transition.js"></script>
<script src="/js/bootstrap-alert.js"></script>
<script src="/js/bootstrap-modal.js"></script>
<script src="/js/bootstrap-dropdown.js"></script>
<script src="/js/bootstrap-scrollspy.js"></script>
<script src="/js/bootstrap-tab.js"></script>
<script src="/js/bootstrap-tooltip.js"></script>
<script src="/js/bootstrap-popover.js"></script>
<script src="/js/bootstrap-button.js"></script>
<script src="/js/bootstrap-collapse.js"></script>
<script src="/js/bootstrap-carousel.js"></script>
<script src="/js/bootstrap-typeahead.js"></script>
<script src="/js/bootstrap-affix.js"></script>
<script>
    _386 = { 
        fastLoad: false ,
        onePass: false , 
        speedFactor: 1 
    };

    
    function ThisYear() {
        document.getElementById('thisyear').innerHTML = new Date().getFullYear();
    };
</script></html>
